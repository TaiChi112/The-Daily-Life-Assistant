name: 3. The Secretary (Automation)

on:
  # ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏¥‡∏î Issue ‡πÉ‡∏´‡∏°‡πà
  issues:
    types: [opened]
  # ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏¥‡∏î Pull Request ‡πÉ‡∏´‡∏°‡πà
  pull_request:
    types: [opened]

# ‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏°‡∏≤‡∏Å! ‡∏ï‡πâ‡∏≠‡∏á‡∏Ç‡∏≠‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏•‡∏á Repo (Permissions)
permissions:
  issues: write
  pull-requests: write

jobs:
  welcome-and-label:
    runs-on: ubuntu-latest
    steps:
      - name: Add Label & Comment
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }} # ‡∏Å‡∏∏‡∏ç‡πÅ‡∏à‡∏ß‡∏¥‡πÄ‡∏®‡∏©‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß
          ISSUE_URL: ${{ github.event.issue.html_url || github.event.pull_request.html_url }}
        run: |
          # ‡πÉ‡∏ä‡πâ GitHub CLI (gh) ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠‡∏Ñ‡∏π‡πà‡∏Å‡∏≤‡∏¢‡πÇ‡∏õ‡∏£‡∏ó‡∏µ‡πà‡∏•‡∏á‡∏°‡∏≤‡πÉ‡∏´‡πâ‡πÅ‡∏•‡πâ‡∏ß
          
          # 1. ‡πÅ‡∏õ‡∏∞‡∏õ‡πâ‡∏≤‡∏¢ Label 'triage' (‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ Label ‡∏ô‡∏µ‡πâ‡πÉ‡∏ô Repo ‡∏Å‡πà‡∏≠‡∏ô ‡∏´‡∏£‡∏∑‡∏≠‡∏°‡∏±‡∏ô‡∏à‡∏∞‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏´‡πâ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ)
          gh issue edit "$ISSUE_URL" --add-label "triage"
          
          # 2. ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö
          gh issue comment "$ISSUE_URL" --body "üëã ‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ‡∏Ñ‡∏£‡∏±‡∏ö! ‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏µ‡πà‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÄ‡∏Ç‡πâ‡∏≤‡∏°‡∏≤‡∏ô‡∏∞ ‡∏û‡πà‡∏≠‡∏ö‡πâ‡∏≤‡∏ô‡∏£‡∏±‡∏ö‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÑ‡∏ß‡πâ‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡∏£‡∏±‡∏ö ‡πÄ‡∏î‡∏µ‡πã‡∏¢‡∏ß‡πÄ‡∏à‡πâ‡∏≤‡∏ô‡∏≤‡∏¢‡∏à‡∏∞‡∏£‡∏µ‡∏ö‡∏°‡∏≤‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ñ‡∏£‡∏±‡∏ö @${{ github.actor }}"